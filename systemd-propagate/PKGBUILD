# Maintainer: Till Smejkal <till.smejkal+packages@ossmail.de>

pkgname=systemd-propagate
pkgver=1
pkgrel=2
pkgdesc='Systemd Services to propagate various targets of the system session to a user session'
arch=('any')
url='ossmail.de'
license=('GPL')
depends=('systemd')

install='systemd-propagate.install'

source=('propagate@.service'
        'propagate-network@.service'
        'network.target'
        'propagate-network-online@.service'
        'network-online.target')

sha512sums=('854bb271c70f451788bf4d024f675c25a38bf70c0726f143facbd9686bd1bc0726dfcb841e75c4010ad777a2dd1f2e51310af673a7b0d9e9676eae547748f9fb'
            '801864d661a1c65d4342ab5406e77c15d2bb129ce807ffb5509733712adb95236406a0e4eb5d52467a9e1a73e309d69f1efb16da18a95f77cd9dcbb8043cce2e'
            '320e53155ee0387d197d737966ab5d7a00bb5bdf7f4beb65b968bb62667a9c34dcf64f187526b73c54fa288eb915647b14dd8492724c647a4dea0633e7f04e94'
            '0001c77ed3dba6479a66d5a07c0a53373a2fc99dbd42aef62616ae35a6090106e30e405df0b39b3f5d0c5abc91fa899feafa733f52145c4cca766c5c39578dcb'
            '9655b3d450c1bffd1411d2d3c79fdf6d54a82f64b7cd221da4d33441eef3c8a4b2c898229e4785ce458ed84ad049e5f2b07d914d04171238cc12695d40037789')

package() {
    # Install the system service files
    install -D -m 644 propagate@.service "$pkgdir"/usr/lib/systemd/system/propagate@.service
    install -D -m 644 propagate-network@.service "$pkgdir"/usr/lib/systemd/system/propagate-network@.service
    install -D -m 644 propagate-network-online@.service "$pkgdir"/usr/lib/systemd/system/propagate-network-online@.service

    # Install the user service files
    install -D -m 644 network.target "$pkgdir"/usr/lib/systemd/user/network.target
    install -D -m 644 network-online.target "$pkgdir"/usr/lib/systemd/user/network-online.target
}
