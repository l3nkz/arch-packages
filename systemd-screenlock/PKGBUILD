# Maintainer: Till Smejkal <till.smejkal+packages@ossmail.de>

pkgname=systemd-screenlock
pkgver=1.3
pkgrel=1
pkgdesc="Session locking using systemd"
url="https://github.com/l3nkz/systemd-screenlock"
depends=('systemd' 'python' 'python-dbus' 'python-gobject')
license=('GPL3')
arch=('any')

source=("https://github.com/l3nkz/systemd-screenlock/archive/v${pkgver}.tar.gz")
sha512sums=('7b32c836421c2a3d8db16cf39d1d15baf8bc8e15b827cd2a8ba1477f604d38a5c0079b5eb1101ff2a2dd43c1d3f9b1c10e283c8aed6ab56d26d3309659f1dfd8')

package() {
    cd "${srcdir}/${pkgname}-${pkgver}"

    # Install the binary
    install -D -m 755 lock-forward "${pkgdir}"/usr/bin/lock-forward
    install -D -m 755 lock-now "${pkgdir}"/usr/bin/lock-now

    # Install the service files
    install -D -m 644 screenlock.service "${pkgdir}"/usr/lib/systemd/system/screenlock.service
    install -D -m 644 lock-forward@.service "${pkgdir}"/usr/lib/systemd/user/lock-forward@.service
}
